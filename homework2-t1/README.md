# 图像去噪对比分析

本项目比较了不同滤波方法对噪声图像的去噪效果，并分析了模板大小对处理速度的影响以及不同方法之间的时间效率。

## 项目介绍

在数字图像处理中，图像去噪是一个重要的预处理步骤。本项目实现了基于OpenCV的图像去噪方法比较，主要分析以下方面：
1. 不同滤波方法对噪声图像的去噪效果
2. 模板大小对处理速度的影响
3. 不同方法之间的时间效率

## 实现的滤波方法

本项目实现了以下四种常用的滤波方法：
1. **均值滤波**：使用均值滤波器，对卷积窗口内的像素取平均值
2. **中值滤波**：使用中值滤波器，对卷积窗口内的像素取中值
3. **高斯滤波**：使用高斯滤波器，根据距离中心像素的远近进行加权平均
4. **双边滤波**：同时考虑空间距离和像素值的相似度进行加权平均

## 评价指标

项目使用以下三种指标评估去噪效果：
1. **MSE（均方误差）**：原始图像和处理后图像之间的均方误差，值越小表示去噪效果越好
2. **PSNR（峰值信噪比）**：衡量图像质量，值越大表示去噪效果越好
3. **SSIM（结构相似性指数）**：衡量两幅图像的结构相似度，值越接近1表示去噪效果越好

## 文件结构

```
homework2-t1/
│
├── noise_reduction_comparison.py  # 主程序文件
├── README.md                     # 说明文档
├── noise images/                 # 噪声图像目录
│   ├── highlight49.png
│   ├── highlight15.png
│   └── edge noise-1.png
│
└── results/                      # 结果输出目录
    ├── highlight49/              # 每个图像的结果子目录
    ├── highlight15/
    └── edge noise-1/
```

## 功能实现

1. **滤波器函数**：
   - `apply_mean_filter()`: 实现均值滤波
   - `apply_median_filter()`: 实现中值滤波
   - `apply_gaussian_filter()`: 实现高斯滤波
   - `apply_bilateral_filter()`: 实现双边滤波

2. **评价指标计算**：
   - `calculate_metrics()`: 计算MSE、PSNR和SSIM三种评价指标

3. **图像处理**：
   - `process_image()`: 对单张图像应用不同的滤波方法，使用不同的模板大小，并计算时间和评价指标

4. **结果可视化**：
   - `plot_time_comparison()`: 绘制时间效率对比图
   - `plot_metrics_comparison()`: 绘制评价指标对比图

## 运行方法

### 环境要求
- Python 3.6+
- OpenCV
- NumPy
- Matplotlib
- scikit-image

### 安装依赖
```bash
pip install opencv-python numpy matplotlib scikit-image
```

### 运行程序
```bash
python noise_reduction_comparison.py
```

## 结果分析

运行程序后，会在`results`目录下生成每张图像的处理结果，包括：

1. **处理后的图像**：
   - 原始图像
   - 使用不同滤波方法(内核大小为5)处理后的图像

2. **性能分析图表**：
   - 时间效率对比图：展示不同滤波方法在不同内核大小下的处理时间
   - 评价指标对比图：展示不同滤波方法在不同内核大小下的MSE、PSNR和SSIM值

3. **详细数据**：
   - 文本文件，包含所有处理结果的详细数据表格

## 主要结论

通过本项目的实现和分析，可以得出以下结论：

1. **模板大小对处理速度的影响**：
   - 随着模板大小的增加，所有滤波方法的处理时间都会增加
   - 增加幅度因滤波方法而异，有些方法(如双边滤波)对模板大小的敏感度更高

2. **不同方法之间的时间效率**：
   - 均值滤波通常是最快的
   - 双边滤波通常是最慢的
   - 中值滤波和高斯滤波的处理时间居中

3. **去噪效果**：
   - 对于不同类型的噪声，最佳的滤波方法可能不同
   - 双边滤波通常在保持图像细节的同时去除噪声方面表现较好
   - 中值滤波对椒盐噪声有较好的处理效果
   - 高斯滤波对高斯噪声有较好的处理效果

## 注意事项

- 程序默认使用5种不同的内核大小：3x3, 5x5, 7x7, 9x9, 11x11
- 为了减少生成的图像数量，只保存内核大小为5x5的滤波结果图像
- 图像处理使用灰度图像进行，如果输入是彩色图像，会自动转换为灰度图像 